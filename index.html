<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#000000">
    <title>My Toolbox</title>
    <link rel="manifest" href="manifest.json">
    <style>
        :root { --bg: #000000; --card: #1c1c1e; --text: #ffffff; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background-color: var(--bg); color: var(--text); margin: 0; padding: 20px;
            padding-top: max(40px, env(safe-area-inset-top));
            user-select: none; -webkit-user-select: none;
        }

        /* HEADER */
        header { 
            display: flex; justify-content: space-between; align-items: center; 
            margin-bottom: 30px; padding: 0 10px; 
        }
        .title-block h1 { margin: 0; font-size: 32px; font-weight: 800; letter-spacing: -0.5px; }
        .title-block p { color: #888; margin: 5px 0 0 0; font-size: 14px; }
        
        .backup-btn {
            font-size: 24px; cursor: pointer; padding: 10px; 
            background: #333; border-radius: 50%; width: 40px; height: 40px;
            display: flex; align-items: center; justify-content: center;
        }

        /* APP GRID */
        .app-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        /* APP CARD */
        .app-card {
            background: var(--card); border-radius: 20px;
            padding: 20px; color: white;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            aspect-ratio: 1 / 1;
            transition: transform 0.1s, background 0.2s;
            border: 1px solid #333;
            cursor: pointer;
        }
        .app-card:active { transform: scale(0.95); background: #2c2c2e; }

        .icon-box {
            width: 50px; height: 50px; border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 28px; margin-bottom: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
        }
        .car-bg { background: linear-gradient(135deg, #4FC3F7, #0288D1); }
        .bill-bg { background: linear-gradient(135deg, #BB86FC, #6200EE); }
        .sub-bg { background: linear-gradient(135deg, #03DAC6, #018786); }
        .money-bg { background: linear-gradient(135deg, #FFD54F, #F57F17); }
        .shop-bg { background: linear-gradient(135deg, #FF5252, #D32F2F); }

        .app-name { font-weight: 600; font-size: 15px; text-align: center; }
        .app-desc { font-size: 11px; color: #888; margin-top: 4px; text-align: center; }

        /* MODAL */
        .modal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8); z-index: 200; display: none;
            align-items: center; justify-content: center;
        }
        .modal { background: #222; width: 85%; max-width: 350px; padding: 25px; border-radius: 15px; text-align: center; }
        .modal h3 { margin-top: 0; color: #fff; }
        .modal p { color: #aaa; font-size: 13px; line-height: 1.5; margin-bottom: 20px; }
        .b-btn { width: 100%; padding: 15px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; font-size: 15px; margin-bottom: 10px; }
        .b-export { background: #0A84FF; color: white; }
        .b-import { background: #30D158; color: black; }
        .b-close { background: transparent; color: #666; margin-top: 10px; }
    </style>
</head>
<body>

    <header>
        <div class="title-block">
            <h1>My Apps</h1>
            <p>Utilities & Tools</p>
        </div>
        <div class="backup-btn" onclick="openBackup()">‚òÅÔ∏è</div>
    </header>

    <div class="app-grid">
        <div class="app-card" onclick="window.location.href='autolog.html'">
            <div class="icon-box car-bg">üöó</div>
            <div class="app-name">AutoLog</div>
            <div class="app-desc">Car Service</div>
        </div>

        <div class="app-card" onclick="window.location.href='tracker.html'">
            <div class="icon-box money-bg">üí∞</div>
            <div class="app-name">Spending</div>
            <div class="app-desc">Finance</div>
        </div>

        <div class="app-card" onclick="window.location.href='subtrack.html'">
            <div class="icon-box sub-bg">üìÖ</div>
            <div class="app-name">SubTrack</div>
            <div class="app-desc">Bills</div>
        </div>

        <div class="app-card" onclick="window.location.href='fairsplit.html'">
            <div class="icon-box bill-bg">üßæ</div>
            <div class="app-name">FairSplit</div>
            <div class="app-desc">Splitter</div>
        </div>

        <div class="app-card" onclick="window.location.href='pricewar.html'">
            <div class="icon-box shop-bg">‚öñÔ∏è</div>
            <div class="app-name">Price War</div>
            <div class="app-desc">Compare</div>
        </div>
        <div class="app-card" onclick="window.location.href='expiry.html'">
    <div class="icon-box" style="background: linear-gradient(135deg, #FF9800, #F57C00);">üõ°Ô∏è</div>
    <div class="app-name">Expiry</div>
    <div class="app-desc">Assets & Docs</div>
</div>
    </div>

    <div class="modal-overlay" id="modalBackup">
        <div class="modal">
            <h3>Master Backup</h3>
            <p>Save/Restore all apps at once.</p>
            <button class="b-btn b-export" onclick="exportAll()">üì§ Save Full Backup</button>
            <button class="b-btn b-import" onclick="importAll()">üì• Restore Full Backup</button>
            <button class="b-btn b-close" onclick="closeBackup()">Close</button>
        </div>
    </div>
    <input type="file" id="fileInput" style="display:none" onchange="handleFileSelect(this)">

    <script>
        const KEYS = ['autolog_v2','myExpenses','myCategories','st_edit_subs','fs_items','fs_friends','fs_tax','fs_svc','expiry_data'];
        function openBackup(){document.getElementById('modalBackup').style.display='flex'}
        function closeBackup(){document.getElementById('modalBackup').style.display='none'}
        function exportAll(){
            let b={}; KEYS.forEach(k=>{let v=localStorage.getItem(k);if(v)b[k]=v});
            if(Object.keys(b).length===0) return alert("No data to backup!");
            let a=document.createElement('a'); a.href=URL.createObjectURL(new Blob([JSON.stringify(b)],{type:"application/json"}));
            a.download=`MyToolbox_FULL_${new Date().toISOString().slice(0,10)}.json`; document.body.appendChild(a); a.click(); document.body.removeChild(a);
        }
        function importAll(){document.getElementById('fileInput').click()}
        function handleFileSelect(i){
            let f=i.files[0]; if(!f)return; let r=new FileReader();
            r.onload=e=>{try{let d=JSON.parse(e.target.result); Object.keys(d).forEach(k=>{if(KEYS.includes(k))localStorage.setItem(k,d[k])}); alert("Restored!"); closeBackup();}catch(e){alert("Error")}};
            r.readAsText(f); i.value='';
        }
    </script>
</body>
</html>



